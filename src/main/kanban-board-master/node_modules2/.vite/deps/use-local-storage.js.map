{
  "version": 3,
  "sources": ["../../use-local-storage/dist/index.js"],
  "sourcesContent": ["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = require(\"react\");\r\nfunction useLocalStorage(key, defaultValue, options) {\r\n    var opts = react_1.useMemo(function () {\r\n        return __assign({ serializer: JSON.stringify, parser: JSON.parse, logger: console.log, syncData: true }, options);\r\n    }, [options]);\r\n    var serializer = opts.serializer, parser = opts.parser, logger = opts.logger, syncData = opts.syncData;\r\n    var _a = react_1.useState(function () {\r\n        if (typeof window === \"undefined\")\r\n            return defaultValue;\r\n        try {\r\n            var item = window.localStorage.getItem(key);\r\n            var res = item ? parser(item) : defaultValue;\r\n            return res;\r\n        }\r\n        catch (e) {\r\n            logger(e);\r\n            return defaultValue;\r\n        }\r\n    }), storedValue = _a[0], setValue = _a[1];\r\n    react_1.useEffect(function () {\r\n        if (typeof window === \"undefined\")\r\n            return;\r\n        var updateLocalStorage = function () {\r\n            if (storedValue !== undefined) {\r\n                window.localStorage.setItem(key, serializer(storedValue));\r\n            }\r\n            else {\r\n                window.localStorage.removeItem(key);\r\n            }\r\n        };\r\n        try {\r\n            updateLocalStorage();\r\n        }\r\n        catch (e) {\r\n            logger(e);\r\n        }\r\n    }, [storedValue]);\r\n    react_1.useEffect(function () {\r\n        if (!syncData)\r\n            return;\r\n        var handleStorageChange = function (e) {\r\n            if (e.key !== key || e.storageArea !== window.localStorage)\r\n                return;\r\n            try {\r\n                setValue(e.newValue ? parser(e.newValue) : undefined);\r\n            }\r\n            catch (e) {\r\n                logger(e);\r\n            }\r\n        };\r\n        if (typeof window === \"undefined\")\r\n            return;\r\n        window.addEventListener(\"storage\", handleStorageChange);\r\n        return function () { return window.removeEventListener(\"storage\", handleStorageChange); };\r\n    }, [key, syncData]);\r\n    return [storedValue, setValue];\r\n}\r\nexports.default = useLocalStorage;\r\n"],
  "mappings": ";;;;;;;;AAAA;AAAA;AACA,QAAI,WAAY,WAAQ,QAAK,YAAa,WAAY;AAClD,iBAAW,OAAO,UAAU,SAAS,GAAG;AACpC,iBAAS,GAAG,IAAI,GAAG,IAAI,UAAU,QAAQ,IAAI,GAAG,KAAK;AACjD,cAAI,UAAU,CAAC;AACf,mBAAS,KAAK,EAAG,KAAI,OAAO,UAAU,eAAe,KAAK,GAAG,CAAC;AAC1D,cAAE,CAAC,IAAI,EAAE,CAAC;AAAA,QAClB;AACA,eAAO;AAAA,MACX;AACA,aAAO,SAAS,MAAM,MAAM,SAAS;AAAA,IACzC;AACA,WAAO,eAAe,SAAS,cAAc,EAAE,OAAO,KAAK,CAAC;AAC5D,QAAI,UAAU;AACd,aAAS,gBAAgB,KAAK,cAAc,SAAS;AACjD,UAAI,OAAO,QAAQ,QAAQ,WAAY;AACnC,eAAO,SAAS,EAAE,YAAY,KAAK,WAAW,QAAQ,KAAK,OAAO,QAAQ,QAAQ,KAAK,UAAU,KAAK,GAAG,OAAO;AAAA,MACpH,GAAG,CAAC,OAAO,CAAC;AACZ,UAAI,aAAa,KAAK,YAAY,SAAS,KAAK,QAAQ,SAAS,KAAK,QAAQ,WAAW,KAAK;AAC9F,UAAI,KAAK,QAAQ,SAAS,WAAY;AAClC,YAAI,OAAO,WAAW;AAClB,iBAAO;AACX,YAAI;AACA,cAAI,OAAO,OAAO,aAAa,QAAQ,GAAG;AAC1C,cAAI,MAAM,OAAO,OAAO,IAAI,IAAI;AAChC,iBAAO;AAAA,QACX,SACO,GAAG;AACN,iBAAO,CAAC;AACR,iBAAO;AAAA,QACX;AAAA,MACJ,CAAC,GAAG,cAAc,GAAG,CAAC,GAAG,WAAW,GAAG,CAAC;AACxC,cAAQ,UAAU,WAAY;AAC1B,YAAI,OAAO,WAAW;AAClB;AACJ,YAAI,qBAAqB,WAAY;AACjC,cAAI,gBAAgB,QAAW;AAC3B,mBAAO,aAAa,QAAQ,KAAK,WAAW,WAAW,CAAC;AAAA,UAC5D,OACK;AACD,mBAAO,aAAa,WAAW,GAAG;AAAA,UACtC;AAAA,QACJ;AACA,YAAI;AACA,6BAAmB;AAAA,QACvB,SACO,GAAG;AACN,iBAAO,CAAC;AAAA,QACZ;AAAA,MACJ,GAAG,CAAC,WAAW,CAAC;AAChB,cAAQ,UAAU,WAAY;AAC1B,YAAI,CAAC;AACD;AACJ,YAAI,sBAAsB,SAAU,GAAG;AACnC,cAAI,EAAE,QAAQ,OAAO,EAAE,gBAAgB,OAAO;AAC1C;AACJ,cAAI;AACA,qBAAS,EAAE,WAAW,OAAO,EAAE,QAAQ,IAAI,MAAS;AAAA,UACxD,SACOA,IAAG;AACN,mBAAOA,EAAC;AAAA,UACZ;AAAA,QACJ;AACA,YAAI,OAAO,WAAW;AAClB;AACJ,eAAO,iBAAiB,WAAW,mBAAmB;AACtD,eAAO,WAAY;AAAE,iBAAO,OAAO,oBAAoB,WAAW,mBAAmB;AAAA,QAAG;AAAA,MAC5F,GAAG,CAAC,KAAK,QAAQ,CAAC;AAClB,aAAO,CAAC,aAAa,QAAQ;AAAA,IACjC;AACA,YAAQ,UAAU;AAAA;AAAA;",
  "names": ["e"]
}
